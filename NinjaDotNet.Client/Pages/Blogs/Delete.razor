@page "/blogs/delete/{Id}"

@inject IBlogRepository _blogRepo
@inject NavigationManager _navManager

@if (Model == null)
{
    <Loading Text="Loading..." />
}
else
{
    <div class="col-md-4">
        <h2>Delete...</h2>
        <div class="btn btn-primary" @onclick="BackToList">
            <span class="oi oi-arrow-circle-left"></span> Back to List
        </div>
        <h1>@Model.Title</h1>
        <p>@Model.CreatedDate</p>
        <p>@((MarkupString) Model.BlogBody)</p>
        <div class="btn btn-danger" @onclick="DeleteBlog">Are you sure?</div>
    </div>
}



@code
{
    [Parameter]
    public string Id { get; set; }

    private BlogModel Model = null;

    protected override async Task OnInitializedAsync()
    {
        Model = await _blogRepo.Get(Endpoints.BlogsEndpoint, int.Parse(Id));
    }

    private async Task DeleteBlog()
    {
        await _blogRepo.Delete(Endpoints.BlogsEndpoint, int.Parse(Id));
        _navManager.NavigateTo("/blogs/");
    }

    private void BackToList()
    {
        _navManager.NavigateTo("/blogs/");
    }

}